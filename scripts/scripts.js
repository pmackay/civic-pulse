(function(){"use strict";var a,b;a="http://www.codeforamerica.org/api",a="http://civicapi.herokuapp.com/api",b=angular.module("civicpulseApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","restangular","angularMoment","angular-loading-bar"]),b.config(["$httpProvider","RestangularProvider",function(a){return a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]),b.config(["$routeProvider","RestangularProvider",function(b,c){return b.when("/",{templateUrl:"views/activity.html",controller:"ActivityController"}).when("/activity",{templateUrl:"views/activity.html",controller:"ActivityController"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/orgs",{templateUrl:"views/orgs.html",controller:"OrgsController"}).otherwise({redirectTo:"/"}),c.setBaseUrl(a)}])}).call(this),function(){var a,b,c;a=100,b=angular.module("civicpulseApp"),b.config(["RestangularProvider",function(a){return a.addResponseInterceptor(function(a,b){var c;return c=a,"getList"===b&&(c=a.objects),c})}]),c=function(a){var b,c,d;return d=a.last_updated.replace(" GMT",""),a.last_updated=moment(d,"ddd, D MMM YYYY HH:mm:ss").format("X"),a.github_details&&(b=moment(a.github_details.created_at),c=moment().diff(b),2592e6>c)?a.is_recent=!0:void 0},b.factory("CivicService",["$timeout","$http","Restangular","$rootScope",function(b,d,e){return{projects:function(){var b;return console.log("projects"),b=e.all("projects").getList({per_page:a}),b.then(function(a){var b,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push(c(b));return f}),b},organizations:function(){var b;return b=e.all("organizations").getList({per_page:a}),b.then(function(a){var b,d,e,f,g;for(g=[],e=0,f=a.length;f>e;e++)b=a[e],g.push(function(){var a,e,f,g;for(f=b.current_projects,g=[],a=0,e=f.length;e>a;a++)d=f[a],g.push(c(d));return g}());return g}),b}}}])}.call(this),function(){"use strict";var a;a=angular.module("civicpulseApp"),a.controller("ActivityController",["$scope","$rootScope","CivicService",function(a,b,c){var d;return a.languageFilterSelected=function(b){return console.log(b),a.languageFilter=b},a.getProjectVisibility=function(b){return a.newProjectsValue&&!b.is_recent||""!==a.languageFilter&&a.languageFilter!==b.github_details.language},a.resetFilters=function(){return a.query="",a.languageFilter="",a.newProjectsValue=!1},b.activeTab="activity",a.languageFilter="",console.log("ActivityController "+a.projects),void 0===b.projects?(d=c.projects(),console.log("ActivityController"),a.newProjectsValue=!1,d.then(function(a){var c,d,e,f,g;for(console.log(a),b.projects=a,b.languages={},g=b.projects,e=0,f=g.length;f>e;e++)d=g[e],c=d.github_details.language,(void 0===c||null===c||""===c||"null"===c)&&(c="Unknown",d.github_details.language="Unknown"),void 0===b.languages[c]?b.languages[c]=1:b.languages[c]+=1;return console.log(b.languages)})):void 0}]),a.controller("OrgsController",["$scope","$rootScope","CivicService",function(a,b,c){var d;return b.activeTab="orgs",void 0===b.organizations?(d=c.organizations(),d.then(function(a){return b.organizations=a})):void 0}])}.call(this);